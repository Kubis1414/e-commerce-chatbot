$schema: https://azuremlschemas.azureedge.net/promptflow/latest/Flow.schema.json
inputs:
  user_query:
    type: string
    default: jak se máš
outputs:
  final_answer:
    type: string
    reference: ${generate_answer.output}
nodes:
- name: process_query
  type: python
  source:
    type: code
    path: process_query.py
  inputs:
    user_query: ${inputs.user_query}
  outputs:
    search_query: ${output}
- name: search_docs
  type: python
  source:
    type: code
    path: search_docs.py
  inputs:
    search_query: ${process_query.search_query}
  outputs:
    retrieved_docs: ${output}
- name: filter_docs
  type: python
  source:
    type: code
    path: filter_docs.py
  inputs:
    retrieved_docs: ${search_docs.retrieved_docs}
    user_query: ${inputs.user_query}
  outputs:
    filtered_docs: ${output}
- name: generate_answer
  type: python
  source:
    type: code
    path: generate_answer.py
  inputs:
    user_query: ${inputs.user_query}
    filtered_docs: ${filter_docs.filtered_docs}
  outputs:
    output: ${output}
